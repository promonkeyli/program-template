# Go é¡¹ç›®æ ‡å‡†ç›®å½•ç»“æ„è§„èŒƒ

æœ¬æ–‡æ¡£æè¿°äº† Go é¡¹ç›®æœ€æ ‡å‡†å’Œæ¨èä½¿ç”¨çš„ç›®å½•ç»“æ„è§„èŒƒï¼ŒåŸºäº Go ç¤¾åŒºçš„æœ€ä½³å®è·µå’Œå®˜æ–¹æŒ‡å¯¼ã€‚

## ç›®å½•ç»“æ„æ€»è§ˆ

```
project-root/
â”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£
â”‚   â”œâ”€â”€ app1/
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â””â”€â”€ app2/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/               # ç§æœ‰åº”ç”¨ç¨‹åºå’Œåº“ä»£ç 
â”‚   â”œâ”€â”€ app/               # åº”ç”¨ç¨‹åºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ user/         # ç”¨æˆ·é¢†åŸŸï¼ˆåŒ…å«è¯¥é¢†åŸŸçš„æ‰€æœ‰ä»£ç ï¼‰
â”‚   â”‚   â”œâ”€â”€ order/        # è®¢å•é¢†åŸŸ
â”‚   â”‚   â””â”€â”€ auth/         # è®¤è¯é¢†åŸŸ
â”‚   â”œâ”€â”€ config/           # é…ç½®ç›¸å…³
â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“è¿æ¥å’Œåˆå§‹åŒ–
â”‚   â”œâ”€â”€ router/           # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ pkg/              # å†…éƒ¨å…±äº«åŒ…ï¼ˆé¡¹ç›®å†…éƒ¨ä½¿ç”¨ï¼‰
â”œâ”€â”€ pkg/                   # å¯ä»¥è¢«å¤–éƒ¨åº”ç”¨ç¨‹åºä½¿ç”¨çš„åº“ä»£ç 
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ api/                   # API å®šä¹‰æ–‡æ¡£ï¼ˆOpenAPI/Swaggerï¼‰
â”‚   â””â”€â”€ swagger/          # Swagger æ–‡æ¡£
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶æ¨¡æ¿æˆ–é»˜è®¤é…ç½®
â”œâ”€â”€ scripts/               # ç”¨äºæ‰§è¡Œå„ç§æ„å»ºã€å®‰è£…ã€åˆ†æç­‰æ“ä½œçš„è„šæœ¬
â”œâ”€â”€ test/                  # é¢å¤–çš„å¤–éƒ¨æµ‹è¯•åº”ç”¨ç¨‹åºå’Œæµ‹è¯•æ•°æ®
â”œâ”€â”€ web/                   # Web åº”ç”¨ç¨‹åºç‰¹å®šç»„ä»¶
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ examples/              # åº”ç”¨ç¨‹åºæˆ–å…¬å…±åº“çš„ç¤ºä¾‹
â”œâ”€â”€ deployments/           # éƒ¨ç½²ç›¸å…³æ–‡ä»¶ï¼ˆdocker-compose, k8s ç­‰ï¼‰
â”œâ”€â”€ build/                 # æ‰“åŒ…å’ŒæŒç»­é›†æˆ
â”œâ”€â”€ tools/                 # æ”¯æŒå·¥å…·ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ third_party/           # å¤–éƒ¨è¾…åŠ©å·¥å…·ã€fork çš„ä»£ç å’Œå…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·
â”œâ”€â”€ githooks/              # Git hooks
â”œâ”€â”€ assets/                # é¡¹ç›®ä¸­ä½¿ç”¨çš„å…¶ä»–èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€logo ç­‰ï¼‰
â”œâ”€â”€ website/               # é¡¹ç›®ç½‘ç«™çš„æ•°æ®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env.example
â”œâ”€â”€ Makefile               # Make å‘½ä»¤
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ README.md
```

## è¯¦ç»†è¯´æ˜

### `/cmd` - åº”ç”¨ç¨‹åºå…¥å£

**ç”¨é€”**: åŒ…å«åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ã€‚

**è§„åˆ™**:
- æ¯ä¸ªåº”ç”¨ç¨‹åºçš„ä¸»å…¥å£åº”è¯¥æ”¾åœ¨ç‹¬ç«‹çš„å­ç›®å½•ä¸­
- ç›®å½•ååº”è¯¥ä¸åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ååŒ¹é…
- `main.go` æ–‡ä»¶åº”è¯¥å°½å¯èƒ½ç®€æ´ï¼ŒåªåŒ…å«åˆå§‹åŒ–é€»è¾‘

**ç¤ºä¾‹**:
```
cmd/
â”œâ”€â”€ server/
â”‚   â””â”€â”€ main.go      # ä¸»æœåŠ¡å™¨åº”ç”¨
â”œâ”€â”€ migrate/
â”‚   â””â”€â”€ main.go      # æ•°æ®åº“è¿ç§»å·¥å…·
â””â”€â”€ cli/
    â””â”€â”€ main.go      # å‘½ä»¤è¡Œå·¥å…·
```

### `/internal` - ç§æœ‰åº”ç”¨ç¨‹åºä»£ç 

**ç”¨é€”**: å­˜æ”¾ç§æœ‰åº”ç”¨ç¨‹åºå’Œåº“ä»£ç ï¼Œè¿™äº›ä»£ç ä¸ä¼šè¢«å…¶ä»–é¡¹ç›®å¯¼å…¥ã€‚

**è§„åˆ™**:
- `internal` ç›®å½•ä¸‹çš„ä»£ç åªèƒ½è¢«å½“å‰é¡¹ç›®å¯¼å…¥
- Go ç¼–è¯‘å™¨çš„ç‰¹æ®Šå¤„ç†ï¼š`internal` åŒ…åªèƒ½è¢«å…¶çˆ¶ç›®å½•çš„ç›´æ¥å­åŒ…å¯¼å…¥
- è¿™æ˜¯å­˜æ”¾åº”ç”¨ç¨‹åºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹

**å¸¸è§å­ç›®å½•ç»“æ„**:

#### `/internal/app` - åº”ç”¨ç¨‹åºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘

**Go å®˜æ–¹æ¨èåšæ³•ï¼ˆæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ï¼‰**:

Go å®˜æ–¹æ›´å€¾å‘äº**æŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ä»£ç **ï¼Œè€Œä¸æ˜¯æŒ‰æŠ€æœ¯å±‚æ¬¡åˆ†å±‚ã€‚è¿™ç§æ–¹å¼æ›´ç¬¦åˆ Go çš„ç®€æ´å“²å­¦ï¼š

```
internal/app/
â”œâ”€â”€ user/                    # ç”¨æˆ·é¢†åŸŸ
â”‚   â”œâ”€â”€ user.go              # ç”¨æˆ·æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ handler.go           # HTTP å¤„ç†å™¨ï¼ˆControllerï¼‰
â”‚   â”œâ”€â”€ service.go           # ä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰
â”‚   â”œâ”€â”€ repository.go        # æ•°æ®è®¿é—®ï¼ˆRepositoryï¼‰
â”‚   â””â”€â”€ user_test.go         # å•å…ƒæµ‹è¯•
â”œâ”€â”€ order/                   # è®¢å•é¢†åŸŸ
â”‚   â”œâ”€â”€ order.go
â”‚   â”œâ”€â”€ handler.go
â”‚   â”œâ”€â”€ service.go
â”‚   â””â”€â”€ repository.go
â””â”€â”€ auth/                    # è®¤è¯é¢†åŸŸ
    â”œâ”€â”€ auth.go
    â”œâ”€â”€ handler.go
    â”œâ”€â”€ service.go
    â””â”€â”€ repository.go
```

**ä¼˜åŠ¿**:
- âœ… **é«˜å†…èš**: ç›¸å…³ä»£ç é›†ä¸­åœ¨ä¸€èµ·ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
- âœ… **ä½è€¦åˆ**: ä¸åŒé¢†åŸŸä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå‡å°‘ä¾èµ–
- âœ… **æ˜“äºæ‰©å±•**: æ–°å¢ä¸šåŠ¡é¢†åŸŸåªéœ€æ·»åŠ æ–°ç›®å½•
- âœ… **ç¬¦åˆ Go å“²å­¦**: ç®€å•ã€ç›´æ¥ã€å®ç”¨
- âœ… **ä¾¿äºæµ‹è¯•**: æ¯ä¸ªé¢†åŸŸå¯ä»¥ç‹¬ç«‹æµ‹è¯•

**æ›¿ä»£æ–¹æ¡ˆï¼ˆåˆ†å±‚æ¶æ„ï¼Œé€‚åˆå¤§å‹é¡¹ç›®ï¼‰**:

å¯¹äºå¤§å‹ Web é¡¹ç›®æˆ–éœ€è¦ä¸¥æ ¼åˆ†ç¦»å…³æ³¨ç‚¹çš„åœºæ™¯ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼š

```
internal/app/
â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚ï¼šå¤„ç† HTTP è¯·æ±‚å’Œå“åº”
â”œâ”€â”€ services/        # æœåŠ¡å±‚ï¼šä¸šåŠ¡é€»è¾‘å¤„ç†
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹ï¼šå®šä¹‰æ•°æ®ç»“æ„
â”œâ”€â”€ repositories/    # æ•°æ®è®¿é—®å±‚ï¼šæ•°æ®åº“æ“ä½œ
â””â”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆå¯é€‰ï¼‰
```

**é€‰æ‹©å»ºè®®**:
- ğŸ¯ **æ¨èä½¿ç”¨é¢†åŸŸé©±åŠ¨**: é€‚ç”¨äºå¤§å¤šæ•°é¡¹ç›®ï¼ˆç‰¹åˆ«æ˜¯ä¸­å°å‹é¡¹ç›®ï¼‰
- ğŸ¯ **å¤§å‹é¡¹ç›® (>20ä¸ªæ¨¡å—)**: å¯ä»¥è€ƒè™‘åˆ†å±‚æ¶æ„ï¼ŒèŒè´£æ›´æ¸…æ™°
- ğŸ¯ **å›¢é˜Ÿåä½œ**: åˆ†å±‚æ¶æ„ä¾¿äºå¤šäººåä½œï¼Œå‡å°‘ä»£ç å†²çª

#### `/internal/config` - é…ç½®ç®¡ç†

```
internal/config/
â”œâ”€â”€ config.go       # é…ç½®ç»“æ„å®šä¹‰
â”œâ”€â”€ database.go     # æ•°æ®åº“é…ç½®
â””â”€â”€ server.go       # æœåŠ¡å™¨é…ç½®
```

#### `/internal/database` - æ•°æ®åº“ç›¸å…³

```
internal/database/
â”œâ”€â”€ mysql.go        # MySQL è¿æ¥
â”œâ”€â”€ postgres.go     # PostgreSQL è¿æ¥
â””â”€â”€ migrations/     # æ•°æ®åº“è¿ç§»æ–‡ä»¶
```

#### `/internal/router` - è·¯ç”±å®šä¹‰

```
internal/router/
â”œâ”€â”€ router.go       # è·¯ç”±åˆå§‹åŒ–
â”œâ”€â”€ middleware.go   # ä¸­é—´ä»¶å®šä¹‰
â””â”€â”€ routes/         # è·¯ç”±åˆ†ç»„å®šä¹‰
```

#### `/internal/pkg` - å†…éƒ¨å…±äº«åŒ…

**æ³¨æ„**: è¿™æ˜¯é¡¹ç›®å†…éƒ¨çš„å…±äº«åŒ…ï¼Œä¸æ ¹ç›®å½•çš„ `/pkg` ä¸åŒï¼Œ`/internal/pkg` ä¸­çš„ä»£ç ä¸ä¼šè¢«å¤–éƒ¨é¡¹ç›®å¯¼å…¥ã€‚

```
internal/pkg/
â”œâ”€â”€ middleware/     # HTTP ä¸­é—´ä»¶
â”œâ”€â”€ network/        # ç½‘ç»œç›¸å…³å·¥å…·
â””â”€â”€ utils/          # å†…éƒ¨å·¥å…·å‡½æ•°
```

### `/pkg` - å¯å¯¼å‡ºçš„åº“ä»£ç 

**ç”¨é€”**: å­˜æ”¾å¯ä»¥è¢«å¤–éƒ¨åº”ç”¨ç¨‹åºä½¿ç”¨çš„åº“ä»£ç ã€‚

**è§„åˆ™**:
- å…¶ä»–é¡¹ç›®å¯ä»¥å¯¼å…¥è¿™äº›åŒ…
- åº”è¯¥ä¿æŒ API ç¨³å®šï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- é€šå¸¸åŒ…å«å·¥å…·å‡½æ•°ã€é€šç”¨åº“ç­‰

**ç¤ºä¾‹**:
```
pkg/
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°ï¼ˆæ—¥å¿—ã€JWTã€åŠ å¯†ç­‰ï¼‰
â”œâ”€â”€ logger/         # æ—¥å¿—åº“
â””â”€â”€ validator/      # éªŒè¯å™¨
```

### `/api` - API å®šä¹‰

**ç”¨é€”**: å­˜æ”¾ API å®šä¹‰æ–‡ä»¶ï¼Œå¦‚ OpenAPI/Swagger è§„èŒƒã€Protocol Buffer å®šä¹‰ç­‰ã€‚

**ç¤ºä¾‹**:
```
api/
â”œâ”€â”€ swagger/        # Swagger æ–‡æ¡£
â”‚   â”œâ”€â”€ docs.go
â”‚   â”œâ”€â”€ swagger.json
â”‚   â””â”€â”€ swagger.yaml
â””â”€â”€ proto/          # Protocol Buffer å®šä¹‰ï¼ˆå¦‚æœä½¿ç”¨ gRPCï¼‰
    â””â”€â”€ *.proto
```

### `/configs` - é…ç½®æ–‡ä»¶

**ç”¨é€”**: å­˜æ”¾é…ç½®æ–‡ä»¶æ¨¡æ¿æˆ–é»˜è®¤é…ç½®ã€‚

**ç¤ºä¾‹**:
```
configs/
â”œâ”€â”€ config.yaml
â”œâ”€â”€ config.toml
â””â”€â”€ config.json
```

### `/scripts` - è„šæœ¬æ–‡ä»¶

**ç”¨é€”**: å­˜æ”¾ç”¨äºæ„å»ºã€å®‰è£…ã€åˆ†æç­‰æ“ä½œçš„è„šæœ¬ã€‚

**ç¤ºä¾‹**:
```
scripts/
â”œâ”€â”€ build.sh        # æ„å»ºè„šæœ¬
â”œâ”€â”€ deploy.sh       # éƒ¨ç½²è„šæœ¬
â””â”€â”€ migrate.sh      # æ•°æ®åº“è¿ç§»è„šæœ¬
```

### `/test` - é¢å¤–æµ‹è¯•

**ç”¨é€”**: å­˜æ”¾é¢å¤–çš„å¤–éƒ¨æµ‹è¯•åº”ç”¨ç¨‹åºå’Œæµ‹è¯•æ•°æ®ã€‚

**æ³¨æ„**: ä¸è¦å°†å•å…ƒæµ‹è¯•æ”¾åœ¨è¿™é‡Œï¼Œå•å…ƒæµ‹è¯•åº”è¯¥ä¸æºä»£ç æ”¾åœ¨åŒä¸€ç›®å½•ã€‚

### `/deployments` - éƒ¨ç½²ç›¸å…³

**ç”¨é€”**: å­˜æ”¾éƒ¨ç½²ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚

**ç¤ºä¾‹**:
```
deployments/
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ k8s/
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â””â”€â”€ service.yaml
â””â”€â”€ nginx/
    â””â”€â”€ nginx.conf
```

### `/docs` - é¡¹ç›®æ–‡æ¡£

**ç”¨é€”**: å­˜æ”¾é¡¹ç›®æ–‡æ¡£ï¼Œå¦‚è®¾è®¡æ–‡æ¡£ã€æ¶æ„æ–‡æ¡£ç­‰ã€‚

### `/examples` - ç¤ºä¾‹ä»£ç 

**ç”¨é€”**: å­˜æ”¾åº”ç”¨ç¨‹åºæˆ–å…¬å…±åº“çš„ä½¿ç”¨ç¤ºä¾‹ã€‚

### `/build` - æ„å»ºå’Œ CI

**ç”¨é€”**: å­˜æ”¾æ‰“åŒ…å’ŒæŒç»­é›†æˆç›¸å…³çš„è„šæœ¬å’Œé…ç½®ã€‚

**ç¤ºä¾‹**:
```
build/
â”œâ”€â”€ ci/             # CI é…ç½®æ–‡ä»¶ï¼ˆå¦‚ .github/workflowsï¼‰
â”œâ”€â”€ package/        # æ‰“åŒ…è„šæœ¬
â””â”€â”€ docker/         # Docker ç›¸å…³æ–‡ä»¶
```

## å‘½åè§„èŒƒ

### ç›®å½•å‘½å

- ä½¿ç”¨å°å†™å­—æ¯
- å¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå¯é€‰ï¼Œä½†æ¨èä½¿ç”¨å•æ•°å½¢å¼ï¼‰
- é¿å…ä½¿ç”¨å¤æ•°å½¢å¼ï¼ˆå¦‚ `models` åº”ä¸º `model`ï¼Œä½†ç¤¾åŒºä¸­ `models` ä¹Ÿå¾ˆå¸¸è§ï¼‰

### æ–‡ä»¶å‘½å

- ä½¿ç”¨å°å†™å­—æ¯
- å¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå¦‚ `user_service.go`ï¼‰
- æµ‹è¯•æ–‡ä»¶ä½¿ç”¨ `_test.go` åç¼€
- ç¤ºä¾‹æ–‡ä»¶ä½¿ç”¨ `_example_test.go` åç¼€

### åŒ…å‘½å

- ä½¿ç”¨å°å†™å­—æ¯
- ç®€çŸ­ä¸”æœ‰æ„ä¹‰
- é¿å…ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–æ··åˆå¤§å°å†™
- åŒ…ååº”è¯¥ä¸ç›®å½•ååŒ¹é…

## æœ€ä½³å®è·µ

### 1. æ¶æ„é€‰æ‹©ï¼ˆä¼˜å…ˆæ¨èé¢†åŸŸé©±åŠ¨ï¼‰

**æ¨èæ–¹æ¡ˆ: é¢†åŸŸé©±åŠ¨æ¶æ„ï¼ˆGo å®˜æ–¹å€¾å‘ï¼‰**

Go å®˜æ–¹æ¨èæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ä»£ç ï¼Œæ¯ä¸ªé¢†åŸŸåŒ…å«è¯¥é¢†åŸŸçš„æ‰€æœ‰ç›¸å…³ä»£ç ï¼š

```
internal/app/
â”œâ”€â”€ user/                    # ç”¨æˆ·é¢†åŸŸ
â”‚   â”œâ”€â”€ user.go              # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ handler.go           # HTTP å¤„ç†å™¨
â”‚   â”œâ”€â”€ service.go           # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ repository.go        # æ•°æ®è®¿é—®
â”‚   â””â”€â”€ user_test.go         # æµ‹è¯•
â”œâ”€â”€ order/                   # è®¢å•é¢†åŸŸ
â””â”€â”€ auth/                    # è®¤è¯é¢†åŸŸ
```

**ä¾èµ–å…³ç³»**:
```
Handler (HTTP å±‚)
    â†“
Service (ä¸šåŠ¡é€»è¾‘å±‚)
    â†“
Repository (æ•°æ®è®¿é—®å±‚)
    â†“
Database (æ•°æ®åº“)
```

**ä¼˜åŠ¿**:
- âœ… é«˜å†…èšï¼šç›¸å…³ä»£ç é›†ä¸­ï¼Œæ˜“äºç»´æŠ¤
- âœ… ä½è€¦åˆï¼šé¢†åŸŸä¹‹é—´ç›¸äº’ç‹¬ç«‹
- âœ… ç¬¦åˆ Go ç®€æ´å“²å­¦
- âœ… æ˜“äºæµ‹è¯•å’Œæ‰©å±•

**æ›¿ä»£æ–¹æ¡ˆ: åˆ†å±‚æ¶æ„ï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰**

å¯¹äºå¤§å‹é¡¹ç›® (> 20 ä¸ªæ¨¡å—) æˆ–éœ€è¦ä¸¥æ ¼åˆ†ç¦»å…³æ³¨ç‚¹çš„åœºæ™¯ï¼š

```
internal/app/
â”œâ”€â”€ controllers/     # æ‰€æœ‰æ§åˆ¶å™¨
â”œâ”€â”€ services/        # æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ models/          # æ‰€æœ‰æ¨¡å‹
â””â”€â”€ repositories/    # æ‰€æœ‰æ•°æ®è®¿é—®
```

**é€‰æ‹©å»ºè®®**:
- ğŸ¯ **ä¼˜å…ˆæ¨è**: é¢†åŸŸé©±åŠ¨æ¶æ„ï¼ˆé€‚ç”¨äº 90% çš„é¡¹ç›®ï¼‰
- ğŸ¯ **å¤§å‹é¡¹ç›®**: åˆ†å±‚æ¶æ„ä¾¿äºå¤§è§„æ¨¡å›¢é˜Ÿåä½œ
- ğŸ¯ **æ··åˆæ–¹å¼**: å¯ä»¥é¢†åŸŸé©±åŠ¨ä¸ºä¸»ï¼Œå…±äº«ç»„ä»¶æ”¾åœ¨ `internal/pkg`

### 2. ä¾èµ–æ–¹å‘

- ä¾èµ–åº”è¯¥åªå‘å†…ï¼š`cmd` â†’ `internal` â†’ `pkg`
- é¿å…å¾ªç¯ä¾èµ–
- `internal` å¯ä»¥å¯¼å…¥ `pkg`ï¼Œä½† `pkg` ä¸åº”è¯¥å¯¼å…¥ `internal`

### 3. å¯¼å…¥è·¯å¾„

**é¢†åŸŸé©±åŠ¨æ¶æ„çš„å¯¼å…¥æ–¹å¼**:

```go
// âœ… å¥½çš„åšæ³•ï¼šæŒ‰é¢†åŸŸå¯¼å…¥ï¼Œä¾èµ–æ¸…æ™°
import (
    "web_backend.com/m/v2/internal/app/user"
    "web_backend.com/m/v2/internal/app/auth"
    "web_backend.com/m/v2/pkg/utils"
)

// åœ¨ handler ä¸­ä½¿ç”¨
func UserHandler(ctx *gin.Context) {
    userService := user.NewService()
    // ...
}
```

**åˆ†å±‚æ¶æ„çš„å¯¼å…¥æ–¹å¼**:

```go
// âš ï¸ åˆ†å±‚æ¶æ„ï¼šéœ€è¦å¯¼å…¥å¤šä¸ªåŒ…
import (
    "web_backend.com/m/v2/internal/app/controllers"
    "web_backend.com/m/v2/internal/app/services"
    "web_backend.com/m/v2/internal/app/models"
    "web_backend.com/m/v2/internal/app/repositories"
)
```

**å¯¼å…¥åŸåˆ™**:
- âœ… é¿å…å¯¼å…¥è¿‡å¤šåŒ…ï¼Œä¿æŒä¾èµ–æ¸…æ™°
- âœ… ä¼˜å…ˆä½¿ç”¨é¢†åŸŸåŒ…ï¼Œå‡å°‘è·¨å±‚ä¾èµ–
- âœ… å…±äº«å·¥å…·æ”¾åœ¨ `pkg` ä¸­ï¼Œé¿å…é‡å¤

### 4. æµ‹è¯•æ–‡ä»¶

- å•å…ƒæµ‹è¯•æ–‡ä»¶åº”è¯¥ä¸æºä»£ç æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`*_test.go`
- ä½¿ç”¨è¡¨é©±åŠ¨æµ‹è¯•
- æµ‹è¯•è¦†ç›–ç‡åº”è¯¥è¾¾åˆ° 80% ä»¥ä¸Š

### 5. é”™è¯¯å¤„ç†

- ä½¿ç”¨ `errors` åŒ…åˆ›å»ºé”™è¯¯
- ä½¿ç”¨ `fmt.Errorf` åŒ…è£…é”™è¯¯
- é¿å…ä½¿ç”¨ `panic`ï¼Œé™¤éæ˜¯ç¨‹åºæ— æ³•æ¢å¤çš„é”™è¯¯

### 6. é…ç½®ç®¡ç†

- ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶
- æä¾› `.env.example` æ–‡ä»¶
- æ•æ„Ÿä¿¡æ¯ä¸åº”è¯¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

### 7. æ—¥å¿—

- ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—
- åŒºåˆ†æ—¥å¿—çº§åˆ«ï¼ˆDEBUG, INFO, WARN, ERRORï¼‰
- ç”Ÿäº§ç¯å¢ƒé¿å…è¾“å‡ºæ•æ„Ÿä¿¡æ¯

### 8. é¢†åŸŸé©±åŠ¨å¼€å‘å®è·µ

**æ¯ä¸ªé¢†åŸŸåº”è¯¥åŒ…å«**:
- æ¨¡å‹å®šä¹‰ï¼ˆModel/Entityï¼‰
- HTTP å¤„ç†å™¨ï¼ˆHandler/Controllerï¼‰
- ä¸šåŠ¡é€»è¾‘ï¼ˆServiceï¼‰
- æ•°æ®è®¿é—®ï¼ˆRepositoryï¼‰
- å•å…ƒæµ‹è¯•ï¼ˆTestï¼‰

**ç¤ºä¾‹ç»“æ„**:

```go
// internal/app/user/user.go - æ¨¡å‹å®šä¹‰
package user

type User struct {
    ID       uint   `json:"id"`
    Username string `json:"username"`
    Email    string `json:"email"`
}

// internal/app/user/handler.go - HTTP å¤„ç†å™¨
package user

func (h *Handler) GetUser(c *gin.Context) {
    // ...
}

// internal/app/user/service.go - ä¸šåŠ¡é€»è¾‘
package user

func (s *Service) GetUserByID(id uint) (*User, error) {
    // ...
}

// internal/app/user/repository.go - æ•°æ®è®¿é—®
package user

func (r *Repository) FindByID(id uint) (*User, error) {
    // ...
}
```

**é¢†åŸŸé—´çš„äº¤äº’**:
- âœ… é€šè¿‡æ¥å£å®šä¹‰ä¾èµ–ï¼Œä¾¿äºæµ‹è¯•
- âœ… é¿å…ç›´æ¥ä¾èµ–å…¶ä»–é¢†åŸŸçš„å®ç°
- âœ… å…±äº«é€»è¾‘æ”¾åœ¨ `internal/pkg` ä¸­

## ä¸å½“å‰é¡¹ç›®çš„å¯¹æ¯”

å½“å‰é¡¹ç›®ç»“æ„åŸºæœ¬ç¬¦åˆæ ‡å‡†ï¼Œä½†æœ‰ä»¥ä¸‹å»ºè®®ï¼š

### å½“å‰ç»“æ„åˆ†æ

```
â”œâ”€â”€ cmd/              âœ… ç¬¦åˆæ ‡å‡†
â”œâ”€â”€ internal/         âœ… ç¬¦åˆæ ‡å‡†
â”‚   â”œâ”€â”€ app/         âš ï¸  å½“å‰ä½¿ç”¨åˆ†å±‚æ¶æ„ï¼ˆcontrollers/services/models/repositoriesï¼‰
â”‚   â”œâ”€â”€ config/      âœ… ç¬¦åˆæ ‡å‡†
â”‚   â”œâ”€â”€ database/    âœ… ç¬¦åˆæ ‡å‡†
â”‚   â”œâ”€â”€ router/      âœ… ç¬¦åˆæ ‡å‡†
â”‚   â””â”€â”€ pkg/         âš ï¸  å»ºè®®ï¼šå†…éƒ¨åŒ…å»ºè®®æ›´æ˜ç¡®çš„å‘½å
â”œâ”€â”€ pkg/              âœ… ç¬¦åˆæ ‡å‡†
â””â”€â”€ api/              âœ… ç¬¦åˆæ ‡å‡†
```

### å»ºè®®æ”¹è¿›ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

**é«˜ä¼˜å…ˆçº§**:
1. **è€ƒè™‘é‡æ„ä¸ºé¢†åŸŸé©±åŠ¨**: å°† `internal/app` ä»åˆ†å±‚æ¶æ„æ”¹ä¸ºæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡
   - å½“å‰: `internal/app/controllers/`, `internal/app/services/`, `internal/app/models/`
   - æ¨è: `internal/app/user/`, `internal/app/auth/`, `internal/app/tool/`

**ä¸­ä¼˜å…ˆçº§**:
2. **æ·»åŠ  `/configs` ç›®å½•**: å­˜æ”¾é…ç½®æ–‡ä»¶æ¨¡æ¿
3. **æ·»åŠ  `/scripts` ç›®å½•**: å­˜æ”¾æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
4. **æ·»åŠ  `/docs` ç›®å½•**: å­˜æ”¾é¡¹ç›®æ–‡æ¡£

**ä½ä¼˜å…ˆçº§**:
5. **æ·»åŠ  `/deployments` ç›®å½•**: ç»Ÿä¸€ç®¡ç†éƒ¨ç½²ç›¸å…³æ–‡ä»¶
6. **è€ƒè™‘å°† `/internal/pkg` é‡å‘½å**: é¿å…ä¸æ ¹ç›®å½•çš„ `/pkg` æ··æ·†ï¼ˆå¦‚ `internal/shared`ï¼‰

### é‡æ„ç¤ºä¾‹

**ä»åˆ†å±‚æ¶æ„è¿ç§»åˆ°é¢†åŸŸé©±åŠ¨**:

```
# å½“å‰ç»“æ„
internal/app/
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ auth.go
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ tool.go
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth.go
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ tool.go
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ tool.go
â””â”€â”€ repositories/
    â”œâ”€â”€ user.go
    â””â”€â”€ tool.go

# æ¨èç»“æ„
internal/app/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ auth.go          # æ¨¡å‹
â”‚   â”œâ”€â”€ handler.go       # åŸ controllers/auth.go
â”‚   â”œâ”€â”€ service.go       # åŸ services/auth.go
â”‚   â””â”€â”€ auth_test.go
â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ user.go          # åŸ models/user.go
â”‚   â”œâ”€â”€ handler.go       # åŸ controllers/user.go
â”‚   â”œâ”€â”€ service.go        # åŸ services/user.go
â”‚   â”œâ”€â”€ repository.go    # åŸ repositories/user.go
â”‚   â””â”€â”€ user_test.go
â””â”€â”€ tool/
    â”œâ”€â”€ tool.go          # åŸ models/tool.go
    â”œâ”€â”€ handler.go       # åŸ controllers/tool.go
    â”œâ”€â”€ service.go       # åŸ services/tool.go
    â”œâ”€â”€ repository.go    # åŸ repositories/tool.go
    â””â”€â”€ tool_test.go
```

## å‚è€ƒèµ„æº

- [Standard Go Project Layout](https://github.com/golang-standards/project-layout)
- [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)
- [Effective Go](https://go.dev/doc/effective_go)
- [Go å®˜æ–¹æ–‡æ¡£](https://go.dev/doc/)

## æ€»ç»“

éµå¾ªæ ‡å‡†çš„ Go é¡¹ç›®ç›®å½•ç»“æ„å¯ä»¥å¸®åŠ©ï¼š

1. **æé«˜å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ç›®å½•ç»“æ„ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤
2. **æé«˜å¯æ‰©å±•æ€§**: æ ‡å‡†ç»“æ„ä¾¿äºå›¢é˜Ÿåä½œå’Œé¡¹ç›®æ‰©å±•
3. **ç¬¦åˆç¤¾åŒºè§„èŒƒ**: éµå¾ª Go ç¤¾åŒºçš„æœ€ä½³å®è·µï¼Œæ–¹ä¾¿å…¶ä»–å¼€å‘è€…ç†è§£é¡¹ç›®
4. **å·¥å…·æ”¯æŒ**: è®¸å¤š Go å·¥å…·å’Œ IDE éƒ½é’ˆå¯¹æ ‡å‡†ç»“æ„è¿›è¡Œäº†ä¼˜åŒ–

### æ ¸å¿ƒåŸåˆ™

1. **ä¼˜å…ˆä½¿ç”¨é¢†åŸŸé©±åŠ¨**: Go å®˜æ–¹æ¨èæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ä»£ç ï¼Œè€Œä¸æ˜¯æŒ‰æŠ€æœ¯å±‚æ¬¡åˆ†å±‚
2. **ä¿æŒç®€å•**: ä¸è¦è¿‡åº¦è®¾è®¡ï¼Œæ ¹æ®é¡¹ç›®è§„æ¨¡é€‰æ‹©åˆé€‚çš„æ¶æ„
3. **éµå¾ªçº¦å®š**: ä½¿ç”¨ `cmd/`, `internal/`, `pkg/` ç­‰æ ‡å‡†ç›®å½•
4. **é«˜å†…èšä½è€¦åˆ**: ç›¸å…³ä»£ç é›†ä¸­ï¼Œä¸åŒæ¨¡å—ç‹¬ç«‹

### å…³é”®å†³ç­–ç‚¹

- **å°å‹é¡¹ç›® (< 10 ä¸ªæ¨¡å—)**: é¢†åŸŸé©±åŠ¨ï¼Œç®€å•ç›´æ¥
- **ä¸­å‹é¡¹ç›® (10-20 ä¸ªæ¨¡å—)**: é¢†åŸŸé©±åŠ¨ï¼Œé€‚åº¦åˆ†å±‚
- **å¤§å‹é¡¹ç›® (> 20 ä¸ªæ¨¡å—)**: å¯ä»¥è€ƒè™‘åˆ†å±‚æ¶æ„æˆ–æ··åˆæ–¹å¼
- **å›¢é˜Ÿåä½œ**: åˆ†å±‚æ¶æ„ä¾¿äºå¤šäººåä½œï¼Œä½†é¢†åŸŸé©±åŠ¨æ›´æ˜“ç»´æŠ¤

**è®°ä½**: ç»“æ„æ˜¯ä¸ºäº†æœåŠ¡ä»£ç ï¼Œè€Œä¸æ˜¯é™åˆ¶ä»£ç ã€‚æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µé€‚å½“è°ƒæ•´ï¼Œä½†ä¿æŒæ ¸å¿ƒåŸåˆ™ä¸å˜ã€‚Go çš„å“²å­¦æ˜¯"ç®€å•æœ‰æ•ˆ"ï¼Œä¼˜å…ˆé€‰æ‹©æ›´ç®€å•çš„æ–¹æ¡ˆã€‚

